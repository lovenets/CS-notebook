# HTTP 

当前最主流的 HTTP 版本是 HTTP/1.1。多数主流浏览器已经在2015年底支持了该协议。此外，根据[W3Techs](https://zh.wikipedia.org/w/index.php?title=W3Techs&action=edit&redlink=1)的数据，在2017年5月，在排名前一千万的网站中，有13.7%支持了HTTP/2。

# TCP/IP 协议族

![TCP——IP协议族](img\TCP——IP协议族.jpg)

## 分层

TCP/IP 协议族只包括了应用层、传输层、网络层和数据链路层。

- 应用层：向用户提供应用服务
- 传输层：对应用层提供网络中两台计算机之间的数据传输
- 网络层：处理数据包、选择路由
- 数据链路层：处理连接网路的硬件部分

## 通信传输流

发送端在层与层之间传输数据时，每经过一层时必定会被打上一个该层所属的首部信息。反之，接收端在层与层之间传输数据时，每经过一层时会将对应的首部去掉。

![通信传输流](img\通信传输流.jpg)

## 与 HTTP 关系密切的协议

![HTTP协议和其他协议的关系](img\HTTP协议和其他协议的关系.jpg)

### 1.IP

IP（Internet Protocol）是网络层协议，作用是把数据包传送给对方。为了实现这一点，需要有通信地址和路由。

#### IP 地址 & MAC 地址

IP 地址是网络地址，可以变换；MAC（Media Access Control）地址是网卡的物理地址，几乎不会变。一个 MAC 地址和一个 IP 地址关联。

ARP（Access Resolution Protocol）协议：根据 IP 地址解析出对应的 MAC 地址。

#### 路由

在传送数据过程中，需要中转时，会利用下一个路由的 MAC 地址来搜索下一个路由或是目的地。

![路由](img\路由.jpg)

### 2.TCP

TCP 协议位于传输层，将大块数据分割成以报文段为单位的数据包，并且保证把数据可靠地传送给对方。

#### 三次握手

三次握手是 TCP 用来保证可靠通信的手段之一。

（1）发送端确认：发送端发送一个带 SYN（synchronized）标志的数据包给对方；

（2）接收端确认；接收端回送一个带有的 SYN/ACK（acknowledegment）标志的数据包；

（3）发送端再次确认：发送端再发送一个带 ACK 标志的数据包，握手结束。

如果某个阶段某名中断，TCP 协议会再次以相同的顺序发送相同的数据包。

### 3.DNS

DNS（Domain Name System）服务位于应用层，将域名解析为 IP 地址。

# URI & URL

URL 是 URI 的子集，（不严格地讲）所有 URL 都是 URI，反过来则不成立，因为 URI 实际上还包括 URN（Uniform Resource Name）。

URI 用于==标识==资源，URL 用于==定位==资源，因为通常来讲定位也就意味着标识，所以说 URL 都是 URI。

- index.html 是一个 URI，但不是 URL
- http://localhost:8080/index.html 是 URL，也是 URI。

> URI 是由某个协议方案表示的资源的定位标识符，协议方案是指访问资源所有的协议。

## URI 格式

### 绝对 URI

![绝对 URI 格式](img\绝对 URI 格式.jpg)

- 登录信息（认证）：指定用户名和密码作为从服务器端获取资源时必要的登录信息。可选
- 服务器地址：使用绝对 URI 时必须指定服务器地址，可以是域名，也可以是 IPv4 或 IPv6 地址。
- 服务器端口：可选，省略则使用默认端口
- 文件路径：与 UNIX 系统的文件目录结构相似
- 查询字符串：可选，针对已指定的文件路径内的资源，可以使用查询字符串传入任意参数
- 片段标识符：可选，用于标记出以获取资源中的子资源，RFC（Request For Comments） 并没有明确规定其使用方法

